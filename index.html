<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smooth Button Expansion</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #ffffff;
            min-height: 100vh;
        }
        header {
            background: #f5f5f5;
            text-align: center;
            padding: 2px 1px;
            border-radius: 0px;
            box-shadow: 0 0 7px rgba(0,0,0,0.5);
        }
        header h1 {
            font-size: 2.5rem;
            color: #333333;
        }
        header h1 span {
            color: #ff3333;
            font-weight: bold;
        }
        .content {
            display: grid;
            grid-template-areas: 
                "clubs basketball"
                "fundraisers basketball";
            gap: 20px;
            margin: 20px;
        }
        .card {
            background: #e4e4e4;
            border-radius: 10px;
            box-shadow: 0 0 7px rgba(0,0,0,0.5);
            text-align: center;
            padding: 10px;
            position: relative;
            z-index: 1;
        }
        .card img {
            max-width: 100%;
            border-radius: 5px;
        }
        .card h2 {
            font-size: 1.5rem;
            color: #333;
            margin: 10px 0;
        }
        .clubs { 
            grid-area: clubs; 
            width: 500px;
            height: 450px;
            overflow: hidden;
        }
        .basketball { grid-area: basketball; width: 600px; height: 450px; }
        .basketball iframe{
            border-radius: 10px;

        }
        .fundraisers { grid-area: fundraisers; width: 500px; }
        .club-boxes {
            display: block;
            position: relative;
            z-index: 11;
            overflow: auto;
            opacity: 1;
            height: calc(100% - 60px);
            transform: scale(1);
            transform-origin: top left;
            padding-right: 10px;
        }
        .club-boxes.no-scroll {
            overflow: hidden;
        }
        .club-box {
            background: #d0d0d0;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: fadeIn .5s forwards;
            margin: 0 auto 10px;
            overflow: hidden;
            position: relative;
            z-index: 1;
            width: 100%;
            height: 180px;
        }
        .club-box.expanded-box {
            height: 100%;
            position: absolute;
            left: -2%;
            top: 0;
            right: 0;
            bottom: 0;
            background: #d0d0d0;
            z-index: 100;
            padding: 20px;
            overflow-y: auto;
            width: 98%;
            margin: 0;
        }
        .club-box.expanded-box .image-container {
            width: 50%;
            height: 20%;
            margin: 40px auto 20px;
            top: 2%;
        }
        .club-box.expanded-box img {
            opacity: 1;
            width: 180%;
            height: 180%;
            margin-top: -25px;
        }
        .club-box.expanded-box .description {
            display: block;
            opacity: 1;
            margin-top: 20px;
            text-align: justify;
            width:95%;
            padding: 0 20px;    
        }
        .club-box h3 {
            color: #333333;
            margin: 5px 0;
            font-size: 1rem;
            width: 90%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            text-align: center;
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
        }
        .club-box .image-container {
            width: 130px;
            height: 130px;
            position: relative;
            margin-top: 15px;
            overflow: visible;
        }
        .club-box img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            opacity: 0;
            z-index: 100;
        }
        .club-box img.active {
            opacity: 1;
            z-index: 2;
        }
        .club-box .info-container {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin: 5px auto;
            font-size: 0.6rem;
            opacity: 0;
            margin-top:-10px;
        }
        .club-box .description {
            width: 100%;
            margin: 5px auto;
            font-size: 0.6rem;
            line-height: 1.4;
            opacity: 0;
            display: none;
        }
        .club-box .left-info,
        .club-box .right-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            width: 45%;
        }
        .club-box.expanded {
            height: 180px;
        }
        .club-box.expanded img.active,
        .club-box.expanded .info-container {
            opacity: 1;
        }
        .expand-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            background-color: #ffffff;
            color: #333333;
            border: 1px solid #e0e0e0;
            box-shadow: 0 0 7px rgba(0,0,0,0.5);
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            z-index: 3000;
        }
        .expand-button:hover {
            background-color: #f5f5f5;
            border-color: #ff3333;
            color: #ff3333;
        }
        .expanded-view {
            position: fixed;
            inset: 0;
            background: #ffffff;
            z-index: 9999;
            overflow: auto;
        }
        .expanded-view .club-boxes {
            transform: none;
            height: 100vh;
            padding: 20px;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .disabled { pointer-events: none; }
        body.no-scroll { overflow: hidden; }
    </style>
</head>
<body>
    <header>
        <h1>Today at <span>TZ</span></h1>
        <img src="https://blogs.socsd.org/2016socsd/files/2016/07/socsdicon-t74jey.png" alt="South Orangetown Central School District" id="logo" data-height-percentage="54" data-actual-width="97" data-actual-height="70">
    </header>
    <div class="content">
        <div class="card clubs" id="clubsCard">
            <h2>Clubs Today</h2>
            <button class="expand-button" onclick="expandView()">Expand View</button>
            <div class="club-boxes" id="clubBoxes">
                <div id="clubContainer"></div>
            </div>
        </div>
        <a href="#" class="card basketball" id="basketballCard">
            <h2>Basketball Game<br>Against Pearl River!</h2>
            <iframe src="https://events.locallive.tv/schools/tappan-zee-hs" height="370" width="590" title="bleh bleh bleh"></iframe>
        </a>
        <a href="#" class="card fundraisers" id="fundraisersCard">
            <h2>Fund Raisers</h2>
            <img src="images/fundraisers.png" alt="Fund Raisers">
        </a>
    </div>

    <script>
        const API_KEY = 'AIzaSyDGgqdOZmTZ4vrLDHNFRg92AtK19_e5lsA';
        const CALENDAR_ID = '0jtv97uq2qqepm5mh7ef8dh1fs@group.calendar.google.com';
        
        // Club data array with all club information
        const clubData = [
            ['Academic League', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'This club engages in team competition against other Rockland County high schools by answering questions based on high school curricula and general knowledge questions, such as, sports, pop culture and trivia. The format is a buzzer lock-out system as used in "College Bowl" or "Jeopardy." Meetings are held weekly after school from September through May. From December through March, club members will compete against a different school each week. (Best two out of three 20-minute rounds).'],
            ['Acapella/Accafella/Bella', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Acafellas is a male a cappella ensemble and Bella Acapella is a female a cappella ensemble. Both ensembles perform throughout the year at schools and community events. Repertoire is centered on 3 & 4 part a cappella music including popular and classic standards of male and female quartet music. The ensembles rehearse weekly, rehearsing together and on alternating Mondays, 3:30-4:00PM, as announced each preceding Monday.'],
            ['Aquaponics', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'In this hands-on club, students will learn the definition and importance of aquaponics. Students will explore how to set up and maintain an aquaponics system, including proper fish and plant care. The biology and chemistry of the aquaponics system is also addressed. The goal each year is to harvest and enjoy the herbs and vegetables..'],
            ['Art Service Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Students create signs, posters, murals and flyers using their artistic abilities to enhance our school environment and support school functions. This club runs as an advertising agency, creating works and meeting deadlines.'],
            ['Arts and Crafts Marketing', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Club members learn new Craft-making methods and techniques when creating products to sell. Students will make different types of arts and crafts using a variety of materials and supplies. Some of the crafts that we make are handcrafted cards, jewelry, tie dyed fabrics, plus new ideas from members are always welcome. Members will also gain practical experience in marketing these items to sell. Most of our profits are donated to charitable organizations and/or scholarship funds. All who enjoy making Art and Crafts and would like to learn how to sell them are all welcome.'],
            ['Chamber Music Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'This club provides opportunities for small string ensembles (quartets, trios, etc.) to explore and perform various chamber music works ranging from Vivaldi to Joplin. In addition to some school performances, groups may also perform at conferences, senior citizen centers, and PTA meetings.'],
            ['Chamber Orchestra', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'This small string orchestra is made up of advanced-level students allowing them an opportunity to explore a more advanced repertoire with a special emphasis on Baroque and early classical music literature. The Chamber Orchestra is regularly featured in school concerts throughout the year.'],
            ['Chess Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The TZ Chess Club is open to all students, from novices to experts.  It was formed to promote interest and participation in one of the most popular games in the world!  Learn to play or improve your game, while honing your analytic skills in a fun atmosphere.'],
            ['Computer Science Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The TZHS Computer Science Honor Society invites students to be part of a community of learners committed to fostering their growth and interest in the field of computer science. Students who have taken at least one semester of computer science are eligible to join. Members will complete 10 hours of community services, with at least five of those hours dedicated to support a computer science initiative. The members of the society will meet bi-weekly and collaborate on ideas and decisions to help promote computer science.'],
            ['Cooking Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The cooking club is a fabulous way to learn about seasonal foods and how to prepare them. Our members learn how to find simple recipes and prepare. Of course, we enjoy eating whatever we make. There are also opportunities to use your creativity to volunteer and put your skills to good use. So, if you are looking for a place to be creative, social, and give back a little too, this is a wonderful club to join.'],
            ['DECA – Distributive Education Clubs of America', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'DECA is a national high school organization that gives business students the opportunity to use classroom knowledge by competing against other students on regional, state, and national levels. This organization also develops leadership qualities and communication skills.'],
            ['Discussion Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Current Issues/Discussion Club provides students the opportunity to discuss issues in a non-formal setting. This popular club was founded by students during the 2003-2004 school year. Topics are chosen by the students and discussions are organized by students in a respectful, organized and informal fashion.'],
            ['Drama Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Drama Club offers students an opportunity to foster creativity in theatre. Students work together on scenes to improve their skills or just to have fun. Meetings are once a month with presentations in December and May.'],
            ['Engineering Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Engineering Club provides students a place to further explore their engineering interests. The club competitions will range from friendly competitions within the club/school, such as WPBD challenges, to large National platforms where students submit their best designs for the egg drop challenge at Six Flags Great Adventure in New Jersey. The engineering club is for students who have a desire to expand and strengthen their passion for engineering design. Engineering professionals are invited as guest speakers and mentors to help guide students through activities and competitions.'],
            ['English Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'E.H.S. is a selective service organization for juniors and seniors that confers distinction for high achievement in English language and literature at Tappan Zee High School, while promoting interest in literature and the English language. Students may earn service points for admission during their sophomore year and apply in September of their junior year.'],
            ['Environmental Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Environmental Club empowers students to increase awareness of environmental issues through activities and projects. It is a forum through which students may reach out to influence and engage their friends, parents, and community members, to promote sound environmental behaviors.'],
            ['E-Sports', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Attention all gamers! The TZ ESports Team is a space for all gamers (newbie to pro) to maximize our potential in both gaming and IRL (in real life). We will meet every other week to practice gaming, teamwork skills, improve decision-making and build community around ESports. Join us for our after-school meetings, find fellow gamers in our virtual community and/or participate in our tournaments.'],
            ['Film and Screen Studies Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Participants in the Film and Screen Studies Club will be exposed to independent, classic, and foreign cinema, as well as standard movie fare and episodic television. Meetings often consist of a short introduction of the upcoming film, viewing the film, and then reacting to/discussing various aspects of cinema. We also frequently engage in movie and TV trivia contests!'],
            ['French Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The French Club is open to all students who are interested in French and Francophone culture. Activities include scavenger hunts, an ice cream party, making Mardi Gras masks, bingo, celebrating traditional holidays, watching French films, and listening to French music. We welcome new members and their ideas!'],
            ['French Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Société Honoraire de Français, sponsored by the American Association of Teachers of French, recognizes high achievement of junior and senior French language students. Its aim is to stimulate interest in the study of French, promote and reward high standards of scholarship, and create enthusiasm for and an understanding of Francophone culture and civilization. Students must meet and maintain academic and citizenship requirements.'],
            ['GTSA', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The purpose of the GSA is to help create a school environment where all feel welcomed and accepted for their unique talents and contributions and enjoy the full benefits of our educational system, free from fear of harassment or discrimination.'],
            ['Handbell Choir', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The purpose of the Handbell Choir is to teach students how to play handbells and to prepare pieces for Music Department concerts. This Handbell Choir is open to all students, but some knowledge of music reading is helpful. Students perform once at the Thanksgiving Concert in November and once at the Spring Concert in May. Meets Mondays, 3:00-3:30PM.'],
            ['History Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The History Honor Society was established to give recognition to students who excel in history and demonstrate an enthusiasm for the subject. Additionally, the HHS provides opportunities for students to develop and share their understanding of the world in which we live. Students must meet and maintain the academic and citizenship requirements. Membership is open to Juniors and Seniors only.'],
            ['Interact Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Interact Club provides community service opportunities for high school students. Sponsored by Rotary International, Interact participates in projects to serve the local community. Fundraising opportunities allow the club to hold free events which benefit local residents.'],
            ['Italian Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Italian Club is open to all students interested in Italian culture, language, food, music, etc. Members will be able to participate in varied activities, including after school cooking, meetings, Italian movie afternoons, Italian holiday celebrations, and field trips, as well as attend cultural events in the community.'],
            ['Italian Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Italian Honor Society is a national organization whose goals are to recognize students who have achieved excellence in the study of Italian, as well as to promote a greater understanding and appreciation of Italian culture and civilization. Students must be present at the Induction Ceremony each year and they must continue to meet the established academic and service requirements to maintain membership. Italian Honor Society students tutor, as well as participate in many community service activities.'],
            ['Japanese Culture Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Japanese Culture Club will give students the opportunity to learn more about the culture of Japan. Members can participate in a number of activities including learning the Japanese language, investigating the history of the country, and other cultural experiences unique to Japan. Some activities might include cooking/preparing Japanese food, learning origami, conducting a tea ceremony and celebrating Japanese holidays.'],
            ['Jazz Band', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Jazz Ensemble was formed to promote the performance of jazz and blues music through rehearsals, performances, and analysis of jazz music. The Jazz Ensemble rehearses one evening each week and performs at school concerts as well as special occasions and off-campus programs.'],
            ['Korean Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The objective of the Korean club is to bring students together to gain an understanding and appreciation for Korean culture. We experience this through learning about Korean language, games, music, dance, and crafts. Also, through watching Korean historical dramas and movies as well as learning about Korean holidays and Korean food which is a centerpiece of the culture. All are welcome!'],
            ['Leo Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Leo Club, sponsored by the Blauvelt Lions Club and Lions Clubs International, is a community service club working with these two organizations to help the blind and visually impaired as well as to volunteer within the local, national, and international community. Leos work on community clean-up and beautification projects, help maintain Blauvelt Lions Park, assist with fundraisers for various charities and less fortunate members of the community, and work and interact with Leos from around the United States and the world.'],
            ['Math Team', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The TZ Math Team engages in an exciting mathematics competition against students from other schools. We compete remotely against students from across the state in the New York Math League, and directly against teams from local high schools in the Rockland County Math League. All interested students are invited to join.'],
            ['Model U. N.', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'In Model U.N. students step into the shoes of ambassadors from U.N. member states to debate current issues on the organization\'s vast agenda. Student "delegates" prepare draft resolutions, plot strategy, negotiate with supporters and adversaries, resolve conflicts, and navigate the U.N.\'s rules of procedure, all in the interest of mobilizing "international cooperation" to resolve problems that affect almost every country. Every January the club attends a 3-day conference in New York City hosted by Columbia University.'],
            ['Mu Alpha Theta', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The purpose of this national math honor society is to enrich students\' knowledge and enjoyment of mathematics. Requirements for induction into the TZ chapter include a 90 average for three years of high school math (or 95 for two years), peer tutoring, service to the school, and project work.'],
            ['Multicultural Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Multicultural Club is an organization that celebrates the various cultures, ethnicities, religions, and nationalities present in our community. Meetings and club activities (such as the annual International Show) provide students with opportunities to share their own heritage and to experience the traditions of others. The club focuses on the worth and uniqueness of all cultures, helping to prevent cultural discrimination or misunderstanding in our school and community. The club provides students with a vehicle to make their own culture, and that of others, visible in the school, enriching our community\'s understanding of the depth and richness of its own diversity.'],
            ['National Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'NHS is a selective organization that promotes recognition for students who reflect outstanding accomplishments in the areas of scholarship, leadership, character, and service. Students must apply for admission. Admission is open to academically eligible Juniors and Seniors only who can submit applications in September. Eligible applicants must have a cumulative GPA of 94.500 (weighted) and document sufficient leadership, character and service as part of the application process. Junior applicants are expected to have completed 30 hours of community service during their high school career, prior to applying to NHS. Senior applicants are expected to have completed 40 hours of service prior to applying. After being accepted to NHS, members are required to complete 8 hours of service on a quarterly basis.'],
            ['Peer Leadership', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Peer Leadership is a mentorship program in which selected seniors (Peer Leaders) partake in freshman orientation and continue to be a resource throughout the year by making connections and organizing team building activities. Students apply to become a Peer Leader in the spring of their junior year.'],
            ['Pep Band', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'This performing group plays popular music from the 1960\'s through today, as well as school cheers and fanfares. The group usually rehearses once each week and plays at all home football games and pep rallies during the year.'],
            ['Pickleball Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Pickleball Club provides an inclusive environment for students of all grades and skill levels to play the game of Pickleball. From tournaments to drills to casual games, the club provides a place for all students to enjoy Pickleball. Depending on the weather we will use the tennis courts here at TZHS or the gym.'],
            ['Ping Pong Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The TZ Ping Pong Club is open to all students, from beginners to experts, who enjoy table tennis. Members of this club meet twice a month to play table tennis. The level of play varies from informal to friendly competition, with members learning from one another as they strengthen their game. This club is open to everyone who wants to build their skills and have fun while playing the great game of table tennis.'],
            ['Poetry Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Poetry Club offers a space for student writers to express their creativity while engaging with others and receiving feedback about their work. At meetings, we discuss poets and songwriters alike, and analyze the writings of both. Additionally, the Poetry Club allows students to experiment with the performance aspect of poetry and build confidence in their writing and speaking abilities.'],
            ['Programming Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Computer Science Programming Club will allow students to collaborate on various programming languages and current trends in computer science. Activities include participating in national competitions both locally and online, making local trips to meet industry leaders, and hosting guest speakers to teach students about data, web design, LinkedIn, resumes, and portfolios.'],
            ['So Botz', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The FIRST Robotics Competition Team combines the excitement of sport with the rigors of science and technology. SO BOTZ, Team 6911, in its 8th year, will fundraise, connect with sponsors, and volunteer within our community, region, and across the globe to promote an appreciation for STEM. Working alongside mentors and coaches, the team will build and program an industrial-sized robot for multiple regional competitions. This "ultimate sport of the mind" will teach you to collaborate with teammates to play a challenging field game in alliance with other teams and much much more.'],
            ['Safe Routes Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Safe Routes Club seeks to enable students to walk and bike to school by making routes safer and more appealing. The club promotes physical wellbeing for students and the greater community.'],
            ['Science Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The New York State Science Honor Society promotes extracurricular activity and academic excellence in science. Students must: (a) have completed as least 1.5 semesters of Regents level science; (b) maintained high grades in science; (c) be recommended by two faculty members; and (d) be active in one science-related program, competition, or independent research project (with a presentation) each year.'],
            ['Science Olympiad', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Science Olympiad Team invites 15-30 students to embark on a thrilling journey of scientific exploration and competition. Participants will have the chance to showcase their talents in 20 diverse events at invitational and regional competitions. Each year brings new challenges, with past events encompassing captivating projects (bridge building, car design, clock construction, airplane creation, magnetic levitation, and Rube Goldberg devices), alongside fascinating explorations of rock and mineral identification, genetics, entomology, map reading, and laboratory experiments in Biology, Chemistry, Physics, and Earth Science. Students will work collaboratively in teams of two, honing their skills and preparing for their chosen events. They will then put their knowledge and ingenuity to the test, competing against teams from other schools. Top-performing teams will earn the opportunity to advance to prestigious statewide and national competitions. To ensure that a greater number of students can partake in this enriching experience, we typically field two teams at each competition, fostering a spirit of inclusivity and providing more opportunities for growth and learning.'],
            ['Ski Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The TZHS Ski and Snowboard Club takes 5 trips to Mount Peter after school between January and February. The club takes a bus from school at 3:45 and returns around 8:00 (all members of the club must take the bus to and from the mountain, no one can drive themselves or get a ride with someone else). Students can bring their own equipment or rent at the mountain. Students will need to purchase their tickets (students with season passes are welcome too). Lift tickets, ski/board rentals, helmet rentals, and lesson options will all be purchased through the club at a group rate. There will be an information meeting in November.'],
            ['Social Justice Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Social Justice Club is a service organization open to all members of the TZ community: students, faculty, and staff. We are inspired by the great words of Mahatma Gandhi: "Be the change you wish to see in the world." We discuss issues of race and gender discrimination, economic inequality, and human rights, as well as harmful cultural and media stereotypes. In addition, we are chapter members of Girls Learn International®, Inc. (GLI) which pairs American schools with partner schools in countries where girls have been traditionally denied access to education. The GLI Program "gives students the opportunity to explore issues affecting girls in relation to global human rights, promotes cross-cultural understanding and communication, and trains students to be leaders and advocates for positive change."'],
            ['Spanish Club', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Spanish Club offers students the opportunity to interact with each other while enjoying a variety of fun activities. The club is open to all students interested in Hispanic culture. Activities include: cooking authentic dishes, arts and crafts activities, celebrating Latino holidays, eating at local Hispanic restaurants, and making/breaking piñantas. We welcome new members and their ideas! Students need not be taking Spanish in order to join.'],
            ['Spanish Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Spanish Honor Society is a national organization whose goals are to recognize students who have achieved excellence in the study of Spanish, as well as to promote a greater understanding and appreciation of Spanish culture and civilization. Students must apply for membership, must meet and maintain the academic and citizenship requirements, and must be present at the Induction Ceremony each year. Spanish Honor Society members are required to tutor in Spanish and a variety of subjects during teachers\' office hours and in the Learning Center. Members are also required to perform school and/or community related service and attend monthly meetings.'],
            ['STEM Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The National STEM Honor Society purpose is to inspire student participation in science, technology, engineering, and math ("STEM") disciplines and projects; to provide recognition of student achievement in STEM; to provide opportunities to engage youth in STEM; [and] to work in conjunction with the National STEM Honor Society™ ("NSTEM"™) to promote, encourage, and build a culture of STEM awareness and literacy.'],
            ['Student Organization', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Student Organization (S.O.) is the "voice" of the student body. Every year, each class elects students to form the representative body of the S.O. In the spring, a general election is held for election of S.O. officers and delegates. S.O. acts as the liaison between the school administration and student body in issues dealing with the welfare of student life at TZHS. S.O. is involved in many altruistic programs from collecting toys for Nyack Hospital to food drives for the needy. S.O. truly represents the spirit of TZHS.'],
            ['Students Against Destructive Decisions (S.A.D.D.)', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'S.A.D.D. is a group of concerned students who publicize the dangers of destructive decisions teens face on a daily basis. Informative presentations, guest speakers, and/or handouts are set up by S.A.D.D. members to help educate their peers about the negative effects of alcohol and other drugs. Each year S.A.D.D. organizes a "S.A.D.D. Week," usually at prom time, with daily activities that focus on under-age drinking and high school drug use.'],
            ['Tapress', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Tapress, the newspaper of TZHS, informs students about what is happening in our school while promoting spirit and interest. It is a great opportunity for those who have an interest in writing, art or photography. Every issue is written and edited by students. Meetings are held on Thursdays (as needed).'],
            ['Tones-Literary', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'TONES, TZHS\'s award-winning literary magazine, is published every spring and allows students to express their creativity in poetry, short stories, essays, and artwork. The literary staff reads and selects all written submissions, while the art staff selects and pairs artwork with literature and completes the entire layout of the magazine.'],
            ['Tri-M Music Honor Society', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The Tri-M Music Honor Society is the international music honor society for high school students. It is designed to recognize students for their academic and musical achievements, reward them for their accomplishments and service activities and inspire others to excel at music and leadership. To be considered for membership, a student must demonstrate music participation, academic achievement, leadership, service and character. Students interested in joining should 1) be a member of a musical ensemble during their year of their membership, 2) maintain an A average in their music classes and a B average in their other subjects, and 3) submit an application for membership in January, accruing the required community service hours. New members are inducted as the end of the spring semester. Club meetings are held on Mondays – 4:00-4:30PM: Officers meet the 1st Monday of the month; full membership meeting the 3rd Monday of the month.'],
            ['TV Production', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'The purpose of this club is to provide students with the opportunity to work on developing the skills and experience needed to produce television/media programming. This club will be an outlet for students whose scheduling will not allow for them to be enrolled in the TV production class as well as giving students the additional time and support needed to complete TV productions. Students can also contribute to the weekly video announcements. Students in the club are eligible to participate in the Film Festival hosted by Piermont Library in June.'],
            ['TZ United', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'TZ United is a joint venture between students, student-athletes and the COVE program at Tappan Zee high school. In an effort to foster a greater sense of community and provide an overall feeling of inclusion amongst all students at Tappan Zee high school, TZ United offers the opportunity for students and athletes to engage with the students in the COVE program in a variety of sports and activities throughout the school year. During the sessions, all students will work on the fundamentals of sports as well as on forming meaningful, personal relationships.'],
            ['VAASA', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Varsity Athletes Against Substance Abuse is a peer-to-peer program in which junior and senior varsity athletes take an oath to remain drug, alcohol, tobacco and vape free. Members are trained to serve as role models for younger children and conduct classroom presentations. Additional activities will be planned as well as program meetings. Juniors and seniors who play at least one varsity sport are eligible.'],
            ['Yearbook', ['img1.jpg', 'img2.jpg', 'img3.jpg'], 'room', 'time', 'gc code', 'remind code', 'Students are involved in all phases of design and production of the high school yearbook, which is, in essence, a log of the school year. Yearbook membership is open to all students at TZHS.'],        ];

        async function getEventsForToday() {
            const specificDate = new Date();
            const startOfDay = new Date(specificDate.getFullYear(), specificDate.getMonth(), specificDate.getDate()).toISOString();
            const endOfDay = new Date(specificDate.getFullYear(), specificDate.getMonth(), specificDate.getDate() + 1).toISOString();
            
            const url = `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?` + 
                `key=${API_KEY}` +
                `&timeMin=${startOfDay}` +
                `&timeMax=${endOfDay}` +
                `&singleEvents=true`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(`API returned status ${response.status}: ${JSON.stringify(data)}`);
                }
                
                return data.items || [];
            } catch (error) {
                console.error('Detailed error:', error);
                return [];
            }
        }

        function createBox(clubInfo, index) {
            const [title, images, room, time, gcCode, remindCode, description] = clubInfo;
            const box = document.createElement('div');
            box.className = 'club-box';
            box.style.transform = `translateY(${10 * index}px)`;
            
            const h3 = document.createElement('h3');
            h3.textContent = title;
            box.appendChild(h3);
            
            const imageContainer = document.createElement('div');
            imageContainer.className = 'image-container';
            
            images.forEach((src, i) => {
                const img = document.createElement('img');
                img.src = `images/${src}`;
                img.className = i === 0 ? 'active' : '';
                imageContainer.appendChild(img);
            });
            
            box.appendChild(imageContainer);
            
            const infoContainer = document.createElement('div');
            infoContainer.className = 'info-container';
            
            const leftInfo = document.createElement('div');
            leftInfo.className = 'left-info';
            leftInfo.innerHTML = `
                <span>Time: ${time}</span>
                <span>Room: ${room}</span>
            `;
            
            const rightInfo = document.createElement('div');
            rightInfo.className = 'right-info';
            rightInfo.innerHTML = `
                <span>GC Code: ${gcCode}</span>
                <span>Remind: ${remindCode}</span>
            `;
            
            infoContainer.appendChild(leftInfo);
            infoContainer.appendChild(rightInfo);
            box.appendChild(infoContainer);
            
            const descriptionDiv = document.createElement('div');
            descriptionDiv.className = 'description';
            descriptionDiv.textContent = description;
            box.appendChild(descriptionDiv);

            box.addEventListener('click', function(event) {
                const clubBoxes = document.getElementById('clubBoxes');
                const clubsCard = document.getElementById('clubsCard');
                
                if (this.classList.contains('expanded-box')) {
                    // Reset to normal view
                    this.classList.remove('expanded-box');
                    this.style.height = '180px';
                    clubBoxes.classList.remove('no-scroll');
                    this.querySelector('.description').style.display = 'none';
                    clubBoxes.style.overflow = 'auto';
                } else {
                    // Reset any other expanded boxes
                    document.querySelectorAll('.club-box').forEach(b => {
                        b.classList.remove('expanded-box');
                        b.style.height = '180px';
                        b.querySelector('.description').style.display = 'none';
                    });
                    
                    // Expand this box immediately without animation
                    this.classList.add('expanded-box');
                    this.style.height = `${clubsCard.offsetHeight - 60}px`;
                    clubBoxes.classList.add('no-scroll');
                    this.querySelector('.description').style.display = 'block';
                    clubBoxes.style.overflow = 'hidden';
                    
                    // Make sure images are visible
                    const allImages = this.querySelectorAll('.image-container img');
                    allImages.forEach(img => {
                        if (img.classList.contains('active')) {
                            img.style.opacity = '1';
                            img.style.zIndex = '200';
                        }
                    });
                }
                
                event.stopPropagation();
            });
            
            box.addEventListener('wheel', function(event) {
                if (this.classList.contains('expanded-box')) {
                    const isAtTop = this.scrollTop === 0;
                    const isAtBottom = this.scrollHeight - this.scrollTop === this.clientHeight;
                    
                    if (!(isAtTop && event.deltaY < 0) && !(isAtBottom && event.deltaY > 0)) {
                        event.stopPropagation();
                    }
                }
            }, { passive: false });
            
            return box;
        }

        async function createClubBoxes() {
            const events = await getEventsForToday();
            const container = document.getElementById('clubContainer');
            const grid = document.createElement('div');
            
            const activeClubs = events.length ? 
                events.map(e => clubData.find(c => c[0] === e.summary)).filter(Boolean) : 
                [['No clubs today', ['img1.jpg'], 'N/A', 'N/A', 'N/A', 'N/A', 'No clubs are scheduled for today.']];
            
            let columns;
            if (activeClubs.length <= 4) columns = 1;
            else if (activeClubs.length <= 6) columns = 2;
            else columns = 3;
            
            grid.style.cssText = `
                display: grid;
                grid-template-columns: repeat(${columns},1fr);
                gap: 10px;
                width: 95%;
                margin: 0 auto;
                padding-top: 10px;
                position: relative;
                transform: translateZ(0);
                justify-content: center;
            `;

            activeClubs.forEach((club, index) => grid.appendChild(createBox(club, index)));
            
            container.innerHTML = '';
            container.appendChild(grid);

            setTimeout(() => {
                const boxes = document.querySelectorAll('.club-box');
                boxes.forEach((box, boxIndex) => {
                    box.classList.add('expanded');
                    const imgs = box.querySelectorAll('.image-container img');
                    let currentIndex = 0;
                    
                    setTimeout(() => {
                        setInterval(() => {
                            imgs[currentIndex].classList.remove('active');
                            currentIndex = (currentIndex + 1) % imgs.length;
                            imgs[currentIndex].classList.add('active');
                        }, 12000);
                    }, boxIndex * 300);
                });
            }, 1500);
        }

        function expandView() {
            const expandedView = document.createElement('div');
            expandedView.className = 'expanded-view';
            
            const clubBoxesClone = document.querySelector('.club-boxes').cloneNode(true);
            const closeButton = document.createElement('button');
            closeButton.className = 'expand-button';
            closeButton.textContent = 'Close';
            closeButton.onclick = () => {
                document.body.removeChild(expandedView);
                document.body.classList.remove('no-scroll');
            };
            
            clubBoxesClone.insertBefore(closeButton, clubBoxesClone.firstChild);
            expandedView.appendChild(clubBoxesClone);
            
            document.body.appendChild(expandedView);
            document.body.classList.add('no-scroll');
        }

        document.addEventListener('DOMContentLoaded', createClubBoxes);
    </script>
</body>
</html>